- name: Firewall settings
  hosts: "{{ host }}"
  tasks:
    - name: Allow all access to port for Ubuntu and Kali
      ufw:
        rule: allow
        port: "{{ port }}"
        proto: "{{ protocol }}"
      when: (ansible_facts['distribution'] == "Ubuntu") or
        (ansible_facts['distribution'] == "Kali GNU/Linux")

    - name: Allow all access to port for CentOS
      firewalld:
        port: "{{ port }}/{{ protocol }}"
        permanent: true
        state: enabled
      when: ansible_facts['distribution'] == "CentOS"

    - name: Bounce firewalld
      service: name=firewalld state=restarted
      when: ansible_facts['distribution'] == "CentOS"
